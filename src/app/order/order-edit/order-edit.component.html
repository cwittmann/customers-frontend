<div class="container-fluid">
  <h1>Order</h1>

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item" (click)="navigate(0)">General data</li>
      <li class="breadcrumb-item" (click)="navigate(1)">Product data</li>
      <li class="breadcrumb-item" (click)="navigate(2)">Order Status</li>
    </ol>
  </nav>

  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="tab">
      <h2>General data</h2>
      <div class="form-group">
        <label for="id">Id</label>
        <input formControlName="id" id="id" type="text" class="form-control" [ngModel]="order.id" readonly />
      </div>

      <div class="form-group">
        <label for="customerId">Customer</label>
        <select formControlName="customerId" id="customerId" class="form-control" [ngModel]="order.customerId">
          <option *ngFor="let customer of allCustomers" [value]="customer.id"
            >{{ customer.lastName }}, {{ customer.firstName }}</option
          >
        </select>

        <div *ngIf="formControls.customerId.touched && formControls.customerId.invalid" class="alert alert-danger">
          <div *ngIf="formControls.customerId.errors.required">Customer is required.</div>
        </div>
      </div>

      <div class="form-group">
        <label for="date">Date</label>
        <input
          formControlName="date"
          id="date"
          type="date"
          class="form-control"
          [ngModel]="order.date | date: 'yyyy-MM-dd'"
        />

        <div *ngIf="formControls.date.touched && formControls.date.invalid" class="alert alert-danger">
          <div *ngIf="formControls.date.errors.required">Date is required.</div>
        </div>
      </div>
    </div>

    <div class="tab">
      <h2>Product data</h2>
      <div class="form-group">
        <label for="productId">Product</label>
        <select formControlName="productId" id="productId" class="form-control" [ngModel]="order.productId">
          <option *ngFor="let product of allProducts" [value]="product.id">{{ product.name }}</option>
        </select>

        <div *ngIf="formControls.productId.touched && formControls.productId.invalid" class="alert alert-danger">
          <div *ngIf="formControls.productId.errors.required">Product is required.</div>
        </div>
      </div>

      <div class="form-group">
        <label for="amount">Amount</label>
        <input formControlName="amount" id="amount" type="text" class="form-control" [ngModel]="order.amount" />

        <div *ngIf="formControls.amount.touched && formControls.amount.invalid" class="alert alert-danger">
          <div *ngIf="formControls.amount.errors.required">Amount is required.</div>
          <div *ngIf="formControls.amount.errors.min">
            Amount should be at least 1.
          </div>
        </div>
      </div>
    </div>

    <div class="tab">
      <h2>Order Status</h2>
      <div class="form-group">
        <div class="form-group">
          <label for="status">Status</label>
          <input formControlName="status" id="status" type="text" class="form-control" [ngModel]="order.status" />

          <div *ngIf="formControls.status.touched && formControls.status.invalid" class="alert alert-danger">
            <div *ngIf="formControls.status.errors.required">Status is required.</div>
          </div>
        </div>
      </div>
    </div>

    <button type="button" class="btn btn-primary btn-lg shadow-none" routerLink="/order/list">Cancel</button>
    <button
      type="button"
      class="btn btn-primary btn-lg prev shadow-none"
      (click)="previous()"
      [disabled]="currentTab === 0"
    >
      Previous
    </button>
    <button
      type="button"
      class="btn btn-primary btn-lg next shadow-none"
      (click)="next()"
      [disabled]="currentTab === lastTab"
    >
      Next
    </button>
    <button type="button" class="btn btn-primary btn-lg shadow-none" type="submit">
      Save
    </button>
  </form>
</div>
